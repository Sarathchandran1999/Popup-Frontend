{"ast":null,"code":"import React,{useRef,useState,useEffect}from\"react\";import axios from\"axios\";import{Table,Button,Modal,Form,Input,message}from'antd';import Editor from'react-simple-wysiwyg';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ShowPop=()=>{const[popups,setPopups]=useState([]);const[modalVisible,setModalVisible]=useState(false);const[editablePopup,setEditablePopup]=useState(null);const columns=[{title:'Content',dataIndex:'content',key:'content'},{title:'Actions',key:'actions',render:(text,record)=>/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(Button,{type:\"link\",style:{color:\"#fe9e0d\"},onClick:()=>handleEdit(record),children:\"Edit\"}),/*#__PURE__*/_jsx(Button,{type:\"link\",style:{color:\"#fe9e0d\"},onClick:()=>handleDelete(record),children:\"Delete\"})]})}];const fetchPopups=async()=>{try{const response=await axios.get(\"https://popupbackend-jyry.onrender.com/api/v1/pop/all\");console.log(\"response.data------------------>\",response.data);setPopups(response.data);}catch(error){console.error(\"Error fetching popups:\",error);}};useEffect(()=>{fetchPopups();const intervalId=setInterval(fetchPopups,5000);// Cleanup function to clear the interval when the component unmounts\nreturn()=>clearInterval(intervalId);},[]);const handleEdit=popup=>{setEditablePopup(popup);setModalVisible(true);};const handleDelete=async popup=>{try{await axios.delete(\"https://popupbackend-jyry.onrender.com/api/v1/pop/delete/\".concat(popup._id));message.success('Popup deleted successfully');fetchPopups();// Refresh popups list\n}catch(error){console.error(\"Error deleting popup:\",error);message.error('Failed to delete popup');}};const handleModalCancel=()=>{setModalVisible(false);setEditablePopup(null);};const handleModalSubmit=async values=>{try{console.log(\"values---------------->\",values);await axios.put(\"https://popupbackend-jyry.onrender.com/api/v1/pop/edit/\".concat(editablePopup._id),values);message.success('Popup updated successfully');fetchPopups();// Refresh popups list\nsetModalVisible(false);setEditablePopup(null);}catch(error){console.error(\"Error updating popup:\",error);message.error('Failed to update popup');}};return/*#__PURE__*/_jsxs(\"div\",{id:\"all-popups\",className:\"work-section-wrapper\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"work-section-top\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"primary-subheading\",children:\"All PopUps\"}),/*#__PURE__*/_jsx(\"p\",{className:\"primary-text\",children:\"Show all the PopUps\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"testimonial-section-bottom\",children:[/*#__PURE__*/_jsx(Table,{dataSource:popups,columns:columns}),/*#__PURE__*/_jsx(Modal,{title:\"Edit Popup\",visible:modalVisible,onCancel:handleModalCancel,footer:null,children:/*#__PURE__*/_jsxs(Form,{layout:\"vertical\",initialValues:editablePopup,onFinish:handleModalSubmit,children:[/*#__PURE__*/_jsx(Form.Item,{label:\"Content\",name:\"content\",rules:[{required:true,message:'Please input the popup content!'}],children:/*#__PURE__*/_jsx(Editor,{value:editablePopup===null||editablePopup===void 0?void 0:editablePopup.content,onChange:value=>setEditablePopup({...editablePopup,content:value})})}),/*#__PURE__*/_jsx(Form.Item,{children:/*#__PURE__*/_jsx(Button,{type:\"primary\",htmlType:\"submit\",style:{backgroundColor:\"#fe9e0d\"},children:\"Update\"})})]})})]})]});};export default ShowPop;","map":{"version":3,"names":["React","useRef","useState","useEffect","axios","Table","Button","Modal","Form","Input","message","Editor","jsx","_jsx","jsxs","_jsxs","ShowPop","popups","setPopups","modalVisible","setModalVisible","editablePopup","setEditablePopup","columns","title","dataIndex","key","render","text","record","children","type","style","color","onClick","handleEdit","handleDelete","fetchPopups","response","get","console","log","data","error","intervalId","setInterval","clearInterval","popup","delete","concat","_id","success","handleModalCancel","handleModalSubmit","values","put","id","className","dataSource","visible","onCancel","footer","layout","initialValues","onFinish","Item","label","name","rules","required","value","content","onChange","htmlType","backgroundColor"],"sources":["/home/sarath/Videos/Project/pop-fe/src/Components/ShowPop.js"],"sourcesContent":["import React, { useRef, useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { Table, Button, Modal, Form, Input, message } from 'antd';\nimport Editor from 'react-simple-wysiwyg';\n\n\nconst ShowPop = () => {\n    const [popups, setPopups] = useState([]);\n    const [modalVisible, setModalVisible] = useState(false);\n    const [editablePopup, setEditablePopup] = useState(null);\n    \n    const columns = [\n        {\n            title: 'Content',\n            dataIndex: 'content',\n            key: 'content',\n        },\n        {\n            title: 'Actions',\n            key: 'actions',\n            render: (text, record) => (\n                <span>\n                    <Button type=\"link\" style={{ color: \"#fe9e0d\" }} onClick={() => handleEdit(record)}>Edit</Button>\n                    <Button type=\"link\" style={{ color: \"#fe9e0d\" }} onClick={() => handleDelete(record)}>Delete</Button>\n                </span>\n            ),\n        },\n    ];\n\n    const fetchPopups = async () => {\n        try {\n            const response = await axios.get(\"https://popupbackend-jyry.onrender.com/api/v1/pop/all\");\n            console.log(\"response.data------------------>\",response.data);\n            setPopups(response.data);\n        } catch (error) {\n            console.error(\"Error fetching popups:\", error);\n        }\n    };\n    useEffect(() => {\n        \n        fetchPopups();\n        const intervalId = setInterval(fetchPopups, 5000);\n\n        // Cleanup function to clear the interval when the component unmounts\n        return () => clearInterval(intervalId);\n    }, []);\n    const handleEdit = (popup) => {\n        setEditablePopup(popup);\n        setModalVisible(true);\n    };\n\n    const handleDelete = async (popup) => {\n        try {\n            await axios.delete(`https://popupbackend-jyry.onrender.com/api/v1/pop/delete/${popup._id}`);\n            message.success('Popup deleted successfully');\n            fetchPopups(); // Refresh popups list\n        } catch (error) {\n            console.error(\"Error deleting popup:\", error);\n            message.error('Failed to delete popup');\n        }\n    };\n\n    const handleModalCancel = () => {\n        setModalVisible(false);\n        setEditablePopup(null);\n    };\n\n    const handleModalSubmit = async (values) => {\n        try {\n            console.log(\"values---------------->\",values)\n            await axios.put(`https://popupbackend-jyry.onrender.com/api/v1/pop/edit/${editablePopup._id}`, values);\n            message.success('Popup updated successfully');\n            fetchPopups(); // Refresh popups list\n            setModalVisible(false);\n            setEditablePopup(null);\n        } catch (error) {\n            console.error(\"Error updating popup:\", error);\n            message.error('Failed to update popup');\n        }\n    };\n    return (\n        <div id=\"all-popups\" className=\"work-section-wrapper\">\n            <div className=\"work-section-top\">\n                <p className=\"primary-subheading\">All PopUps</p>\n                <p className=\"primary-text\">\n                    Show all the PopUps\n                </p>\n            </div>\n            <div className=\"testimonial-section-bottom\">\n                <Table dataSource={popups} columns={columns} />\n                <Modal\n                    title=\"Edit Popup\"\n                    visible={modalVisible}\n                    onCancel={handleModalCancel}\n                    footer={null}\n                >\n                    <Form\n                        layout=\"vertical\"\n                        initialValues={editablePopup}\n                        onFinish={handleModalSubmit}\n                    >\n                        <Form.Item\n                            label=\"Content\"\n                            name=\"content\"\n                            rules={[{ required: true, message: 'Please input the popup content!' }]}\n                        >\n                            <Editor value={editablePopup?.content} onChange={(value) => setEditablePopup({ ...editablePopup, content: value })} />\n                        </Form.Item>\n                        <Form.Item>\n                            <Button type=\"primary\" htmlType=\"submit\" style={{backgroundColor:\"#fe9e0d\"}}>\n                                Update\n                            </Button>\n                        </Form.Item>\n                    </Form>\n                </Modal>\n            </div>\n        </div>\n    );\n};\n\nexport default ShowPop;\n\n\n\n\n\n\n\n\n\n\n\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}